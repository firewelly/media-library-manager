<mxfile host="app.diagrams.net" modified="2024-01-15T10:00:00.000Z" agent="5.0" etag="xxx" version="22.1.16" type="device">
  <diagram name="YY Media Library Sequence" id="sequence-diagram">
    <mxGraphModel dx="2074" dy="1181" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1654" pageHeight="2336" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Title -->
        <mxCell id="title" value="YY Media Library - Main Interaction Sequences" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=16;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="20" width="1200" height="30" as="geometry" />
        </mxCell>
        
        <!-- Actors/Lifelines -->
        <mxCell id="user" value="User" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="80" width="30" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="medialib" value="MediaLibrary" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="200" y="80" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="progress" value="ProgressWindow" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="360" y="80" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="database" value="Database" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="520" y="80" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="analyzer" value="VideoContentAnalyzer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="680" y="80" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="tagger" value="VideoTagger" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="860" y="80" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="crawler" value="JAVDB Crawler" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1020" y="80" width="100" height="40" as="geometry" />
        </mxCell>
        
        <!-- Lifelines -->
        <mxCell id="user-line" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="90" y="140" width="10" height="800" as="geometry" />
        </mxCell>
        
        <mxCell id="medialib-line" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="245" y="140" width="10" height="800" as="geometry" />
        </mxCell>
        
        <mxCell id="progress-line" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="405" y="140" width="10" height="800" as="geometry" />
        </mxCell>
        
        <mxCell id="database-line" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="565" y="140" width="10" height="800" as="geometry" />
        </mxCell>
        
        <mxCell id="analyzer-line" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="735" y="140" width="10" height="800" as="geometry" />
        </mxCell>
        
        <mxCell id="tagger-line" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="905" y="140" width="10" height="800" as="geometry" />
        </mxCell>
        
        <mxCell id="crawler-line" value="" style="html=1;points=[];perimeter=orthogonalPerimeter;outlineConnect=0;targetShapes=umlLifeline;portConstraint=eastwest;newEdgeStyle={&quot;edgeStyle&quot;:&quot;elbowEdgeStyle&quot;,&quot;elbow&quot;:&quot;vertical&quot;,&quot;curved&quot;:0,&quot;rounded&quot;:0};fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="1065" y="140" width="10" height="800" as="geometry" />
        </mxCell>
        
        <!-- Sequence 1: Application Startup -->
        <mxCell id="seq1-title" value="1. Application Startup" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="160" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="seq1-1" value="1.1: Launch Application" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="190" as="sourcePoint" />
            <mxPoint x="245" y="190" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq1-2" value="1.2: __init__(db_path)" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="210" as="sourcePoint" />
            <mxPoint x="255" y="230" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq1-3" value="1.3: create_gui()" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="250" as="sourcePoint" />
            <mxPoint x="255" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq1-4" value="1.4: load_videos()" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="290" as="sourcePoint" />
            <mxPoint x="565" y="290" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq1-5" value="1.5: return video list" style="html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="565" y="310" as="sourcePoint" />
            <mxPoint x="255" y="310" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Sequence 2: Folder Scanning -->
        <mxCell id="seq2-title" value="2. Folder Scanning" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="340" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="seq2-1" value="2.1: Select Folder" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="370" as="sourcePoint" />
            <mxPoint x="245" y="370" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq2-2" value="2.2: scan_folder(path)" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="390" as="sourcePoint" />
            <mxPoint x="255" y="410" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq2-3" value="2.3: create ProgressWindow" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="430" as="sourcePoint" />
            <mxPoint x="405" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq2-4" value="2.4: for each video file" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="450" as="sourcePoint" />
            <mxPoint x="255" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq2-5" value="2.5: insert video data" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="490" as="sourcePoint" />
            <mxPoint x="565" y="490" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq2-6" value="2.6: update_progress()" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="510" as="sourcePoint" />
            <mxPoint x="405" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq2-7" value="2.7: close progress" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="530" as="sourcePoint" />
            <mxPoint x="405" y="530" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Sequence 3: Content Analysis -->
        <mxCell id="seq3-title" value="3. Video Content Analysis" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="560" width="180" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="seq3-1" value="3.1: Batch Analyze Videos" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="590" as="sourcePoint" />
            <mxPoint x="245" y="590" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq3-2" value="3.2: create VideoContentAnalyzer" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="610" as="sourcePoint" />
            <mxPoint x="735" y="610" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq3-3" value="3.3: get video list" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="735" y="630" as="sourcePoint" />
            <mxPoint x="565" y="630" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq3-4" value="3.4: for each video" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="735" y="650" as="sourcePoint" />
            <mxPoint x="735" y="670" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq3-5" value="3.5: analyze_video(path)" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="735" y="690" as="sourcePoint" />
            <mxPoint x="735" y="710" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq3-6" value="3.6: update analysis results" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="735" y="730" as="sourcePoint" />
            <mxPoint x="565" y="730" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Sequence 4: Auto Tagging -->
        <mxCell id="seq4-title" value="4. Automatic Tagging" style="text;html=1;strokeColor=none;fillColor=#f0f0f0;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=1;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="760" width="150" height="20" as="geometry" />
        </mxCell>
        
        <mxCell id="seq4-1" value="4.1: Batch Tag Videos" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="100" y="790" as="sourcePoint" />
            <mxPoint x="245" y="790" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq4-2" value="4.2: create VideoTagger" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="255" y="810" as="sourcePoint" />
            <mxPoint x="905" y="810" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq4-3" value="4.3: load_vocabulary()" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="905" y="830" as="sourcePoint" />
            <mxPoint x="905" y="850" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq4-4" value="4.4: get video list" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="905" y="870" as="sourcePoint" />
            <mxPoint x="565" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq4-5" value="4.5: generate_tags_for_video()" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="905" y="890" as="sourcePoint" />
            <mxPoint x="905" y="910" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="seq4-6" value="4.6: update_video_tags()" style="html=1;verticalAlign=bottom;endArrow=block;edgeStyle=elbowEdgeStyle;elbow=vertical;curved=0;rounded=0;" edge="1" parent="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="905" y="930" as="sourcePoint" />
            <mxPoint x="565" y="930" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- Notes -->
        <mxCell id="notes" value="Notes:\n\n• All database operations are performed through SQLite connections\n• Progress windows provide real-time feedback for long operations\n• Video analysis uses computer vision techniques (OpenCV)\n• Tagging system uses NLP with jieba for Chinese text processing\n• JAVDB crawler operates independently for metadata enrichment\n• Error handling and logging are implemented throughout" style="text;html=1;strokeColor=#666666;fillColor=#f5f5f5;align=left;verticalAlign=top;whiteSpace=wrap;rounded=1;fontSize=11;fontFamily=Helvetica;" vertex="1" parent="1">
          <mxGeometry x="1200" y="160" width="300" height="200" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>